!function(e){e.fn.extend({slimScroll:function(i){var s=e.extend({width:"auto",height:"250px",start:"top",alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},i);return this.each(function(){function o(t){if(h){var i=0;(t=t||window.event).wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3);var o=t.target||t.srcTarget||t.srcElement;e(o).closest("."+s.wrapperClass).is(H.parent())&&l(i,!0),t.preventDefault&&!w&&t.preventDefault(),w||(t.returnValue=!1)}}function l(e,t,i){w=!1;var o=e,l=H.outerHeight()-D.outerHeight();if(t&&(o=parseInt(D.css("top"))+e*parseInt(s.wheelStep)/100*D.outerHeight(),o=Math.min(Math.max(o,0),l),o=e>0?Math.ceil(o):Math.floor(o),D.css({top:o+"px"})),f=parseInt(D.css("top"))/(H.outerHeight()-D.outerHeight()),o=f*(H[0].scrollHeight-H.outerHeight()),i){var a=(o=e)/H[0].scrollHeight*H.outerHeight();a=Math.min(Math.max(a,0),l),D.css({top:a+"px"})}H.scrollTop(o),H.trigger("slimscrolling",~~o),r(),n()}function a(){d=Math.max(H.outerHeight()/H[0].scrollHeight*H.outerHeight(),m),D.css({height:d+"px"});var e=d==H.outerHeight()?"none":"block";D.css({display:e})}function r(){if(a(),clearTimeout(p),f==~~f){if(w=s.allowPageScroll,v!=f){var e=0==~~f?"top":"bottom";H.trigger("slimscroll",e)}}else w=!1;v=f,d>=H.outerHeight()?w=!0:(D.stop(!0,!0).fadeIn("fast"),s.railVisible&&E.stop(!0,!0).fadeIn("fast"))}function n(){s.alwaysVisible||(p=setTimeout(function(){s.disableFadeOut&&h||c||u||(D.fadeOut("slow"),E.fadeOut("slow"))},1e3))}var h,c,u,p,g,d,f,v,b="<div></div>",m=30,w=!1,H=e(this);if(H.parent().hasClass(s.wrapperClass)){var C=H.scrollTop();if(D=H.siblings("."+s.barClass),E=H.siblings("."+s.railClass),a(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){H.parent().css("height","auto"),H.css("height","auto");var S=H.parent().parent().height();H.parent().css("height",S),H.css("height",S)}else if("height"in i){var y=i.height;H.parent().css("height",y),H.css("height",y)}if("scrollTo"in i)C=parseInt(s.scrollTo);else if("scrollBy"in i)C+=parseInt(s.scrollBy);else if("destroy"in i)return D.remove(),E.remove(),void H.unwrap();l(C,!1,!0)}}else if(!(e.isPlainObject(i)&&"destroy"in i)){s.height="auto"==s.height?H.parent().height():s.height;var x=e(b).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",height:s.height});H.css({overflow:"hidden",height:s.height});var E=e(b).addClass(s.railClass).css({height:"100%",position:"absolute",top:0,display:s.alwaysVisible&&s.railVisible?"block":"none",zIndex:90}),D=e(b).addClass(s.barClass).css({position:"absolute",top:0,display:s.alwaysVisible?"block":"none",zIndex:99});H.wrap(x),H.parent().append(D),H.parent().append(E),s.railDraggable&&D.bind("mousedown",function(i){var s=e(document);return u=!0,t=parseFloat(D.css("top")),pageY=i.pageY,s.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,D.css("top",currTop),l(0,D.position().top,!1)}),s.bind("mouseup.slimscroll",function(e){u=!1,n(),s.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),E.hover(function(){r()},function(){n()}),D.hover(function(){c=!0},function(){c=!1}),H.hover(function(){h=!0,r(),n()},function(){h=!1,n()}),H.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(g=e.originalEvent.touches[0].pageY)}),H.bind("touchmove",function(e){if(w||e.originalEvent.preventDefault(),e.originalEvent.touches.length){l((g-e.originalEvent.touches[0].pageY)/s.touchScrollStep,!0),g=e.originalEvent.touches[0].pageY}}),a(),"bottom"===s.start?(D.css({top:H.outerHeight()-D.outerHeight()}),l(0,!0)):"top"!==s.start&&(l(e(s.start).position().top,null,!0),s.alwaysVisible||D.hide()),function(e){window.addEventListener?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener("mousewheel",o,!1)):document.attachEvent("onmousewheel",o)}(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery);